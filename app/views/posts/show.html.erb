<div class="page__wrapper">
  <h1>View Post</h1>

  <%= render @post, show: true %>

  <div class="comments header">
    <h2>Comments</h2>
    <%= link_to "add a comment", new_post_comment_path(post_id: @post, parent_post_id: @post), data: { turbo_frame: dom_id_for_records(@post, Comment.new) } %>
  </div>

  <%= turbo_frame_tag dom_id_for_records(@post, Comment.new) %>
    <ul class="comments_list--outer">
      <%= turbo_frame_tag "comments" do %>
        <%= render @post.comments.includes(user: [:profile]).order(created_at: :desc) || "There are no comments yet." %>

        <%#= render partial: "comments/comment", collection: @post.comments.includes(user: [:profile]).order(created_at: :desc), locals: { level: 1 } %>
      <% end %>
    </ul>
</div>

